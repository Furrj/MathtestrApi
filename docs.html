<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Mathtestr Server</title>
  </head>
  <body>
    <main>

      <article>
        <h1>Mathtestr Server Docs</h1>
        <h3>Author: Jackson Furr</h3>
      </article>

      <hr>

      <article>
        <h3>Directory</h3>
        <ol>
          <li><a href="#env_vars">Environemnt Vars</a></li>
          <li><a href="#server">cmd/server</a></li>
          <li><a href="#internal">internal</a></li>
        </ol>
      </article>

      <hr>

      <article>
        <h3 id="env_vars">Environment Vars</h3>
        <ol>
          <li>MODE: DEV/PROD</li>
          <li>DB_URL: Postgres Prod</li>
          <li>DB_URL_TEST: Postgres Dev</li>
        </ol>
      </article>

      <hr>

      <article>
        <h3 id="server">cmd/server</h3>
        <ol>
          <li>Init dbHandler</li>
          <li>Init routeHandler</li>
          <li>Listen for routes</li>
        </ol>
      </article>

      <hr>

      <article>
        <h3 id="internal">internal</h3>
        <ul>
          <li>dbHandler
            <ul>
              <li>struct DBHandler
                <ul>
                  <li>Props:
                    <ul>
                      <li>DB *pgx.Conn</li>
                    </ul>
                  </li>
                  <li>Methods:
                    <ul>
                      <li>InitDBHandler(connectionString string) -> *DBHandler</li>
                      <li>CheckIfUsernameExists(username string) -> (bool, error)</li>
                      <li>GetUserByUsername(username string) -> (schemas.AllUserData, error)</li>
                      <li>GetUserIDByUsername(username string) -> (int, error)</li>
                      <li>GetSessionDataByUserID(id int) -> (schemas.SessionData, error)</li>
                      <li>GetTestResultsByUserID(id int) -> (schemas.TestResults, error)</li>
                      <li>InsertUserInfo(r schemas.RegisterPayload) -> error</li>
                      <li>InsertSessionData(s schemas.SessionData) -> error</li>
                      <li>InsertTestResults(t schemas.TestResults) -> error</li>
                      <li>CreateTables() -> error</li>
                      <li>DropTables() -> error</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>routeHandler
            <ul>
              <li>struct RouteHandler
                <ul>
                  <li>Props:
                    <ul><li>dbHandler *dbHandler.DBHandler</li></ul>
                  </li>
                  <li>Methods:
                    <ul>
                      <li>InitRouteHandler(dbHandler *dbHandler.DBHandler) -> *RouteHandler</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </article>

    </main>
  </body>
</html>

<style>
  html {
    width: 100vw;
    min-height: 100vh;
    box-sizing: border-box;
    overflow-x: hidden;
  }

  main, article {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  hr {
    width: 100vw;
  }
</style>